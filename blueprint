blueprint:
  name: MQTT JSON Message Sender
  description: Sends a user-defined JSON MQTT message on a specific action.
  domain: automation
  input:
    trigger_entity:
      name: Trigger Entity
      selector:
        entity: {}
    json_payload:
      name: JSON Payload
      description: JSON data to send as payload.
      selector:
        text: {}
    mqtt_topic:
      name: MQTT Topic
      default: "home/+/action"
      selector:
        text: {}

trigger:
  platform: state
  entity_id: !input trigger_entity

action:
  - service: mqtt.publish
    data:
      topic: !input mqtt_topic
      payload: !input json_payload
      retain: false
